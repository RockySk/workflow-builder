categories:
  - name: global
  - name: topology
  - name: sampling
  - name: refinement
  - name: scoring
  - name: analysis
nodes:
  - id: global
    label: Global state
    category: global
    schema:
      type: object
      required: [molecules, ncores]
      properties:
        molecules:
          tilte: Molecules
          type: array
          items:
            type: string
            format: data-url
        rundir:
          type: string
        ncores:
          type: integer
          default: 1
          minimum: 1
        cns_exec:
          type: string
    uiSchema:
      molecules:
        items:
          'ui:options':
            accept: '.pdb'
  - id: topoaa
    label: All atom topology
    category: topology
    schema:
      type: object
      properties:
        autohis:
          type: boolean
          description: Automatically ssign protonation states
          default: false
      required: []
    description: Description of topoaa
  - id: topocg
    label: Coarse-grained-atom topology
    category: topology
    schema:
      type: object
      properties: {}
      required: []
    description: Description of topocg
  - id: rigidbody
    label: Rigid body docker
    category: sampling
    schema:
      type: object
      properties:
        ambig:
          type: string
          format: data-url
          description: Ambiguious interaction constraints
        sampling:
          type: integer
          title: Number of models to generate
          minimum: 2
          maximum: 1000
          default: 200
      required: [ambig]
  - id: gdock
    label: Gdock
    category: sampling
    schema:
      type: object
      schema:
        type: object
        properties:
          ambig:
            type: string
            format: data-url
            description: Ambiguious interaction constraints
      required: [ambig]
    description: Description of gdock
  - id: lightdock
    label: Lightdock
    category: sampling
    schema:
      type: object
      properties:
        receptor_chains:
          type: array
          items:
            type: string
        ligand_chains:
          type: array
          items:
            type: string
      required: []
    description: Description of gdock
  - id: flexref
    label: Semi flexible refinement
    category: refinement
    description: Description of flexref
    schema:
      type: object
      properties:
        ambig:
          type: string
          format: data-url
          title: Ambiguious interaction constraints
        cool1_steps:
          type: integer
          title: Number of MD steps during first rigid body cooling stage
          minimum: 0
          maximum: 100
      required: [ambig]
  - id: emref
    label: Energy minimization refinement
    category: refinement
    description: Description of emref
    schema:
      type: object
      properties:
        ambig:
          type: string
          format: data-url
          title: Ambiguious interaction constraints
      required: [ambig]
  - id: mdref
    label: Water refinement
    category: refinement
    description: Description of mdref
    schema:
      type: object
      properties:
        ambig:
          type: string
          format: data-url
          title: Ambiguious interaction constraints
      required: [ambig]
  - id: emscoring
    label: Energy minimization scoring
    category: scoring
    description:  Description of emscoring
    schema:
      type: object
      properties:
        keepwater:
          title: Keep water
          type: boolean
          default: false
      required: []
  - id: clustfcc
    label: Fcc clustering
    schema:
      type: object
      properties:
        contact_distance_cutoff:
          title: Distance cutoff
          type: number
          minimum: 0
          maximum: 100
        fraction_cutoff:
          title: Fraction cutoff
          type: number
          minimum: 0
          maximum: 1
        threshold:
          title: Minimal number of elements inside a cluster
          type: number
          minimum: 1
      required: []
  - id: seletopclusts
    label: Top ranking cluster
    category: analysis
    schema:
      type: object
      properties:
        top_cluster:
          description: description of param
          type: array
          items:
            type: string
        top_models:
          description: description of param
          type: integer
          minimum: 0
          maximum: 100
  - id: seletop
    label: Select top cluster/model
    category: analysis
    schema:
      type: object
      properties:
        select:
          description: description of param
          type: integer
          default: 400
      required: [select]
  - id: clustfcc
    label: FCC clustering
    description: Fraction of Common Contacts Clustering
    category: analysis
    schema:
      type: object
      properties:
        fraction_cutoff:
          type: number
          default: 0.6
      required: []
  - id: caprieval
    label: CAPRI metrics
    category: analysis
    schema:
      type: object
      properties:
        receptor_chain:
          type: string
        ligand_chain:
          type: string
      required: []
templates:
  docking: |
    run_dir = "run1"
    ncores = 20
    molecules =  [
        "../data/1a2k_l_u.pdb",
        "../data/1a2k_r_u.pdb"
        ]

    [topoaa]
    autohis = true

    [rigidbody]
    ambig_fname = '../data/1a2k_ti.tbl'
    sampling = 20
    noecv = true

    [flexref]
    ambig_fname = '../data/1a2k_ti.tbl'
    cool1_steps = 500
    noecv = true

    [emref]
    ambig_fname = '../data/1a2k_ti.tbl'
    noecv = true